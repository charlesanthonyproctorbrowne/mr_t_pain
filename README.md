# ğŸš€âœ¨ ğŸš€ğŸ’» Revolutionary C Struct Decoder: Unleashing Memory-Mapped Magic to Transform Low-Level Bytes into TypeScript Brilliance! ğŸ§™â€â™‚ï¸ğŸ” ğŸ”¥ğŸŒŸ
# Generated by ChadGPT

I would ideally, have a lot more other stuff added in. Snyk, SonarQube, eslint, PR into main, would have if we used githook actions, a .github/workflow directory with some `yml` files for trigger actions etc etc the basic standard requirements on a service.

---

* Delay on getting this over due to being busy (apologies).
* Tests missing - Ideally get them in.
* I don't usually work with bytes in JS, this hurt my brain. Thank you. I was fooled to think I just need to write some `Buffer` byte methods and get the output in the doc - But was Fun!

---

# Sensor Packet Decoder

A TypeScript application that decodes binary sensor packet data and places it into a Redis queue for further processing.

## Features

- Decodes binary packet data from hexadecimal strings
- Converts to structured JSON format following the specified C struct
- Queues processed data to Redis
- Includes test suite
- Docker containerization

## Project Structure

```
packet-decoder/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ models/     # Type definitions
â”‚   â”œâ”€â”€ services/   # Queue service implementations
â”‚   â”œâ”€â”€ utils/      # Packet decoder logic
â”‚   â””â”€â”€ index.ts    # Application entry point
â”œâ”€â”€ tests/          # Integration tests
â”œâ”€â”€ Dockerfile      # Container definition
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ package.json
```

# How To Run?
## Installation

```bash
# Clone repository
git clone https://github.com/charlesanthonyproctorbrowne/mr_t_pain.git
cd packet-decoder

# Run via Docker
docker-compose up -d
```
Then you want to inspect `packet-decoder--app` the output in that container. Install `Docker Desktop` and you can just run `docker-compose up -d` inspect the output in docker all should be fine (works on my machine classic).

I'm a big fan of Docker however, we use AWS and CDK for IaC so haven't implemented it outside of our legacy applications.

But yes - as long as you have the docker daemon running, and ideally docker desktop or you can run Rancher Desktop (basically an open-source view for your docker containers as docker desktop needs license for commerical use so not all have it).

## Testing

Should ideally build a container and run tests fully but don't have time sorry!

## Example Packet Format

The application decodes binary packets that conform to the following C struct:

```c
typedef struct
{
  uint16_t message_id;
  uint32_t sensor_id;
  uint16_t sensor_type;
  uint16_t data_type_id;
  uint16_t value1;
  uint16_t value2;
} SensorPacket;
```

### Example Packet Data

```
Packet1: 490500002e7cf90905007d000c000f00
Packet2: 4a0500002e7cf90905007d000e001100
```

When decoded, these packets produce:

```json
// Packet 1
{
  "message_id": 1353,
  "sensor_id": 167345198,
  "sensor_type": 5,
  "data_type_id": 125,
  "value1": 12,
  "value2": 15
}

// Packet 2
{
  "message_id": 1354,
  "sensor_id": 167345198,
  "sensor_type": 5,
  "data_type_id": 125,
  "value1": 14,
  "value2": 17
}
```
